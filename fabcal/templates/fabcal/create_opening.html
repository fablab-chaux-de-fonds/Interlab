{% extends "forms/base_forms.html" %}
{% load i18n crispy_forms_tags %}
{% load render_bundle from webpack_loader %}

{% block header %}
{{ form.media }}
{% endblock header %}

{% block content_form %}

<div id="timepicker">
    <v-app id="inspire">
        <form action="." method="POST">
            {% csrf_token %}

            {{ form.name_of_field }}

            {% comment %} <div id="form.opening.id_for_label" class="mb-3">
                <label for="{{form.opening.id_for_label}}" class=" form-label requiredField">

                    <span class="asteriskField">*</span>
                </label>
                <v-select label="{% trans "Opening" %}" name="{{form.opening.name}}" class="select form-select"
                    required="" id="{{form.opening.name}}">
                    {% for x, y in form.fields.opening.choices %}
                    <option value="{{ x }}" {% if form.fields.opening.value == x %} selected{% endif %}>{{ y }}</option>
                    {% endfor %}
                    </select>
            </div> {% endcomment %}

            <div id="form.opening.id_for_label" class="mb-3">
                <v-select label="{% trans "Opening" %}" name="{{form.opening.name}}" :items="items" outlined>
                    </select>
            </div>

            <v-dialog class="mb-3" ref="date" v-model="modal" :return-value.sync="date" persistent width="290px">
                <template v-slot:activator="{ on, attrs }">
                    <v-text-field v-model="date" label={% trans "Date*" %} readonly v-bind="attrs" v-on="on" outlined
                        name="date"></v-text-field>
                </template>
                <v-date-picker v-model="date" scrollable color="#0b1783" first-day-of-week=1>
                    <v-spacer></v-spacer>
                    <v-btn text color="primary" @click="modal = false">
                        Cancel
                    </v-btn>
                    <v-btn text color="primary" @click="$refs.date.save(date)">
                        OK
                    </v-btn>
                </v-date-picker>
            </v-dialog>

            <v-dialog class="mb-3" ref="start" v-model="modal2" :return-value.sync="start" persistent width="290px">
                <template v-slot:activator="{ on, attrs }">
                    <v-text-field class="text-blue" v-model="start" label={% trans "Start*" %} readonly v-bind="attrs"
                        v-on="on" outlined name="start">
                    </v-text-field>
                </template>
                <v-time-picker v-if="modal2" v-model="start" full-width format="24hr" :max="end" color="#0b1783">
                    <v-spacer></v-spacer>
                    <v-btn text color="primary" @click="modal2 = false">
                        Cancel
                    </v-btn>
                    <v-btn text color="primary" @click="$refs.start.save(start)">
                        OK
                    </v-btn>
                </v-time-picker>
            </v-dialog>


            <v-dialog class="mb-3" ref="end" v-model="modal3" :return-value.sync="end" persistent width="290px">
                <template v-slot:activator="{ on, attrs }">
                    <v-text-field class="text-blue" v-model="end" label={% trans "End*" %} readonly v-bind="attrs"
                        v-on="on" outlined name="end">
                    </v-text-field>
                </template>
                <v-time-picker v-if="modal3" v-model="end" full-width format="24hr" :min="start" color="#0b1783">
                    <v-spacer></v-spacer>
                    <v-btn text color="primary" @click="modal3 = false">
                        Cancel
                    </v-btn>
                    <v-btn text color="primary" @click="$refs.end.save(end)">
                        OK
                    </v-btn>
                </v-time-picker>
            </v-dialog>

            <v-text-field label={% trans "Comment" %} name="{{form.comment.name}}" outlined></v-text-field>

            <div class="row text-center align-items-center my-5">
                <div class="col">
                    <a href="{{request.META.HTTP_REFERER}}">{% trans 'Whoops, no !' %} </a>
                </div>
                <div class="col">
                    <input class="btn my-4 mx-auto d-block" type="submit" value="{% trans 'Add a slot' %}">
                </div>
        </form>
    </v-app>
</div>

{% endblock content_form %}

{% block js_footer %}
{{ initial|json_script:"initial" }}
{% render_bundle 'time_picker' 'js' %}
{% endblock js_footer %}